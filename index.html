<!DOCTYPE html>
<html class=''>

<head>
    <meta charset='UTF-8'>
    <meta name="robots" content="noindex">
    
    <!-- Dashboard CSS -->
    <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css'>
    <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css'>
    <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css'>
    <style class="cp-pen-styles">@import url("https://fonts.googleapis.com/css?family=Open+Sans:300,400,400i,600,700&subset=latin-ext");</style>
    <link rel="stylesheet" href="./styles/dashboard.css">

    <!-- Vue Bootstrap CSS -->
    <link type="text/css" rel="stylesheet" href="//unpkg.com/bootstrap-vue@latest/dist/bootstrap-vue.css"/>
    <link rel="stylesheet" href="./styles/vue-accordion-component.css">
    <link rel="stylesheet" href="./styles/custom-styles.css">

</head>

<body>

    <body class="sidebar-is-reduced">
        <header class="l-header">
            <div class="l-header__inner clearfix">
                <div class="c-header-icon js-hamburger">
                    <div class="hamburger-toggle">
                        <span class="bar-top"></span>
                        <span class="bar-mid"></span>
                        <span class="bar-bot"></span>
                    </div>
                </div>
                <div class="c-header-icon has-dropdown">
                    <span class="c-badge c-badge--header-icon animated shake">87</span>
                    <i class="fa fa-bell"></i>
                    <div class="c-dropdown c-dropdown--notifications">
                        <div class="c-dropdown__header"></div>
                        <div class="c-dropdown__content"></div>
                    </div>
                </div>
                <div class="c-search">
                    <input class="c-search__input u-input" placeholder="Search..." type="text" />
                </div>
                <div class="header-icons-group">
                    <div class="c-header-icon basket">
                        <span class="c-badge c-badge--header-icon animated shake">12</span>
                        <i class="fa fa-shopping-basket"></i>
                    </div>
                    <div class="c-header-icon logout">
                        <i class="fa fa-power-off"></i>
                    </div>
                </div>
            </div>
        </header>
        <div class="l-sidebar">
            <div class="logo">
                <div class="logo__txt">D</div>
            </div>
            <div class="l-sidebar__content">
                <nav class="c-menu js-menu">
                    <ul class="u-list">
                        <li class="c-menu__item is-active" data-toggle="tooltip" title="Flights">
                            <div class="c-menu__item__inner">
                                <i class="fa fa-plane"></i>
                                <div class="c-menu-item__title">
                                    <span>Flights</span>
                                </div>
                            </div>
                        </li>
                        <li class="c-menu__item has-submenu" data-toggle="tooltip" title="Modules">
                            <div class="c-menu__item__inner">
                                <i class="fa fa-puzzle-piece"></i>
                                <div class="c-menu-item__title">
                                    <span>Modules</span>
                                </div>
                                <div class="c-menu-item__expand js-expand-submenu">
                                    <i class="fa fa-angle-down"></i>
                                </div>
                            </div>
                            <ul class="c-menu__submenu u-list">
                                <li>Payments</li>
                                <li>Maps</li>
                                <li>Notifications</li>
                            </ul>
                        </li>
                        <li class="c-menu__item has-submenu" data-toggle="tooltip" title="Statistics">
                            <div class="c-menu__item__inner">
                                <i class="fa fa-bar-chart"></i>
                                <div class="c-menu-item__title">
                                    <span>Statistics</span>
                                </div>
                            </div>
                        </li>
                        <li class="c-menu__item has-submenu" data-toggle="tooltip" title="Gifts">
                            <div class="c-menu__item__inner">
                                <i class="fa fa-gift"></i>
                                <div class="c-menu-item__title">
                                    <span>Gifts</span>
                                </div>
                            </div>
                        </li>
                        <li class="c-menu__item has-submenu" data-toggle="tooltip" title="Settings">
                            <div class="c-menu__item__inner">
                                <i class="fa fa-cogs"></i>
                                <div class="c-menu-item__title">
                                    <span>Settings</span>
                                </div>
                            </div>
                        </li>
                    </ul>
                </nav>
            </div>
        </div>
    </body>

    <!-- The Main Vue Instance -->
    <main class="l-main content-wrapper content-wrapper--with-bg" id="vue-app" v-cloak>
        <div class="row">
            <div class="col-sm-10 col-sm-offset-1">
                <vue-accordion-component></vue-accordion-component>
                <vue-json-inputter-component></vue-json-inputter-component>
            </div>
        </div>
    </main>


    <!-- The Vue Accordion Component Template -->
    <template id="vue-accordion-component">
        <div class="">
            <h1 class="page-title">Dashboard</h1>
            <div class="panel panel-default">

                <div class="panel-heading">
                    <h3>Hello {{ username }}, you have {{ shipmentData.length }} shipments:</h3>
                </div>

                <table class="table table-condensed" style="border-collapse:collapse;" v-show="!loading">
                    <thead>
                        <tr>
                            <th>Status</th>
                            <th>Internal Reference</th>
                            <th>Carrier</th>
                            <th>Vessel</th>
                            <th>POL</th>
                            <th>Cutoff*</th>
                            <th>ETD</th>
                            <th>POD</th>
                            <th>Price ($USD)</th>
                            <th>No. of Containers</th>
                            <th>Details</th>
                        </tr>
                    </thead>

                    <!-- Loading Screen -->
                    <tr>
                        <div class="timeline-item" v-if="loading">
                            <div class="animated-background">
                                <div class="background-masker header-top"></div>
                                <div class="background-masker header-left"></div>
                                <div class="background-masker header-right"></div>
                                <div class="background-masker header-bottom"></div>
                                <div class="background-masker subheader-left"></div>
                                <div class="background-masker subheader-right"></div>
                                <div class="background-masker subheader-bottom"></div>
                                <div class="background-masker content-top"></div>
                                <div class="background-masker content-first-end"></div>
                                <div class="background-masker content-second-line"></div>
                                <div class="background-masker content-second-end"></div>
                                <div class="background-masker content-third-line"></div>
                                <div class="background-masker content-third-end"></div>
                            </div>
                        </div>
                    </tr>

                    <tbody v-for="(shipment, index) in shipmentData" v-bind:key="index"
                           class="table table-condensed" 
                           style="border-collapse:collapse;" 
                           v-show="!loading">
                        
                        <tr @click="toggleShipmentData(index)" class="accordion-toggle table-hover">
                            <td class="text-success text-uppercase text-bold" 
                                :class="{ 
                                    'pending-status':   shipment.bookingStatus === 'PENDING', 
                                    'confirmed-status': shipment.bookingStatus === 'CONFIRMED',
                                    'rejected-status':  shipment.bookingStatus === 'REJECTED' || shipment.bookingStatus === 'CANCELLED',
                                }"
                            >
                                {{ shipment.bookingStatus }}
                            </td>
                            <td>{{ shipment.InternalReference }}</td>
                            <td>{{ shipment.CarrierName }}</td>
                            <td>{{ shipment.VesselName }}</td>
                            <td>{{ shipment.PortOfLoadName }}</td>
                            <td>15-Apr-18</td>
                            <td>16-Apr-18</td>
                            <td>{{ shipment.PortOfDischargeName }}</td>
                            <td>{{ shipment.FreightCost }}</td>
                            <td>{{ shipment.EquipmentDetails.length }}</td>
                            <td>
                                <span class="pull-left glyphicon glyphicon-download-alt"></span>
                                <span @click.stop="cancelBooking(index)" 
                                      class=" pull-right glyphicon glyphicon-remove-circle"
                                      v-show="shipment.bookingStatus !== 'CANCELLED'"
                                ></span>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="12" v-show="shipment.isOpen">
                                <div class="accordian-body">
                                    <table class="table table-striped hidden-table gold-bg">
                                        <tbody class="gold-bg">
                                            <tr class="gold-bg">
                                                <th>Voyage Number:</th>
                                                <td>{{ shipment.VoyageNumber }}</td>

                                                <th>Empty Pickup Address:</th>
                                                <td v-if="shipment.confirmation">{{ shipment.confirmation.EmptyPickUpLocation }}</td>

                                                <th>Full Dropoff Location:</th>
                                                <td v-if="shipment.confirmation">{{ shipment.confirmation.FullDropOffLocation }}</td>
                                            </tr>
                                            <tr class="gold-bg" v-if="shipment.confirmation">
                                                <th>Carrier Reference Number:</th>
                                                <td>{{ shipment.confirmation.CarrierReferenceNumber }}</td>

                                                <th>Earliest Empty Pickup:</th>
                                                <td>{{ shipment.confirmation.EarliestEmptyPickUpDate }}</td>
                                                
                                                <th>Earliest Full Dropoff:</th>
                                                <td>{{ shipment.confirmation.EarliestFullDropOff }}</td>
                                            </tr>
                                            <tr class="gold-bg">
                                                <th>Container Release Number:</th>
                                                <td v-if="shipment.confirmation">{{ shipment.confirmation.ContainerReleaseNumber }}</td>

                                                <th>Latest Full Dropoff:</th>
                                                <td v-if="shipment.confirmation">{{ shipment.confirmation.LatestFullDeliveryDate }}</td>
                                                
                                                <th>Forwarder:</th>
                                                <td>{{ shipment.VoyageNumber }}</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </td>
                        </tr>
                    </tbody>

                </table>
            </div><!-- end .page-content -->
        </div><!-- end .content-wrapper -->
    </template>


    <!-- JSON Input Area -->
    <template id="vue-json-inputter-component">
        <div>
            <div class="form-group">
                <h2>
                    Input JSON here:
                    <button class="btn btn-default" 
                            style="margin-left: 15px;"
                            @click="sendJsonData"
                    >
                        Add Data
                    </button>
                </h2>
                <textarea class="form-control json-textarea" rows="10" v-model="jsonData" value="jsonData"></textarea>
            </div> 
            <div>
                <h2>Example JSON</h2>
                <pre>
                    <code>
                        {
                            "InternalReference": "PO101",
                            "FreightCost": "2400",
                            "CarrierPartnerAlias": "MAEU",
                            "Context": "ExplorateNoTerms",
                            "EquipmentDetails": [
                                {
                                    "NumberOfEquipment": "1",
                                    "ImportExportHaulage": "MerchantExportHaulageMerchantImportHaulage",
                                    "EquipmentTypeCode": "45G0",
                                    "EquipmentDescription": "40 Highcube"
                                },
                                {
                                    "NumberOfEquipment": "1",
                                    "ImportExportHaulage": "MerchantExportHaulageMerchantImportHaulage",
                                    "EquipmentTypeCode": "22G0",
                                    "EquipmentDescription": "20 General"
                                }
                            ],
                            "PortOfDischargeName": "Singapore, Singapore",
                            "PortOfLoadName": "Sydney, Australia",
                            "OriginDeparts": "20-Oct-17",
                            "VesselName": "CARL SCHULTE",
                            "ForwarderDetails": {
                                "ForwarderName": "DSV Air & Sea"
                            },
                            "DestinationArrives": "07-Nov-17",
                            "VoyageNumber": "735N",
                            "CarrierName": "Maersk Line",
                            "confirmation": {
                                "LatestFullDeliveryDate": "18-Oct-17",
                                "CarrierReferenceNumber": "AAA123",
                                "ContainerReleaseNumber": "bc123",
                                "EarliestEmptyPickUpDate": "10-Oct-17",
                                "EmptyPickUpLocation": "Qube Logistics 123 Alexandria Sydney 2000",
                                "EarliestFullDropOff": "16-Oct-17",
                                "FullDropOffLocation": "DP World Sydney Botany Bay Sydney 2000"
                            },
                            "rejected": {}
                        }
                    </code>
                </pre>
            </div>
        </div>
    </template>



    <!-- jQuery, Bootstrap, Font Awesome -->
    <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js'></script>

    <script src='https://use.fontawesome.com/2188c74ac9.js'></script>

    <!-- Vue JS -->
    <script src="https://cdn.jsdelivr.net/npm/vue@2.5.13/dist/vue.js"></script>
    <!-- Vue Sweet Alert -->
    <script src="https://unpkg.com/vue-swal"></script>
    <!-- Vue Components -->
    <script src="./scripts/vue-components.js"></script>
    
    <!-- Custom JS -->
    <script src="./scripts/scripts.js"></script>
</body>
</html>